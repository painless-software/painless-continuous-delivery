
dev:
  extends: .deploy
  environment:
    name: dev
    url: https://console.appuio.ch/console/project/{{ cookiecutter.project_slug }}-dev/overview
  variables:
    ENVIRONMENT: dev
    SOURCE: {{ cookiecutter.project_slug }}-dev
    TARGET: {{ cookiecutter.project_slug }}-dev
  only:
  - feature/*

staging:
  extends: .deploy
  environment:
    name: staging
    url: https://console.appuio.ch/console/project/{{ cookiecutter.project_slug }}-staging/overview
  variables:
    ENVIRONMENT: staging
    SOURCE: {{ cookiecutter.project_slug }}-dev
    TARGET: {{ cookiecutter.project_slug }}-staging
  only:
  - master

production:
  extends: .deploy
  environment:
    name: production
    url: https://console.appuio.ch/console/project/{{ cookiecutter.project_slug }}-prod/overview
  variables:
    ENVIRONMENT: prod
    SOURCE: {{ cookiecutter.project_slug }}-staging
    TARGET: {{ cookiecutter.project_slug }}-prod
  only:
  - tags
