# Painless deployment with Bitbucket Pipelines.
# Visit the docs at https://confluence.atlassian.com/bitbucket/configure-bitbucket-pipelines-yml-792298910.html

{% include '_/ci-services/definitions/%s' % cookiecutter.ci_service %}
pipelines:
  pull-requests:
    '**':
      - step: *checks
      - step: *tests

  custom:
    review-app:
      - step:
          <<: *build
          deployment: development
      - step: *deploy-review-app

  branches:
    master:
      - step: *checks
      - step: *tests
      - step:
          <<: *build
          deployment: integration
      - step: *deploy-integration

  tags:
    '*':
      - step: *deploy-production
